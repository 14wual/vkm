<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VKM | Setup: 14wual</title>
    
    <script>
        const params = new URLSearchParams(location.search);
        const account_username = params.get("account");
        document.querySelector('title').innerHTML = "VKM | Setup: " + account_username;
    </script>

    <link rel="stylesheet" href="../style/setup.css">
</head>
<body>
    <div class="card">
        <h2 id="welcome-h2"></h2>
        <p id="welcome-p"></p>
        <script>            
            document.getElementById("welcome-h2").innerHTML = "Welcome: " + account_username + "!";
            document.getElementById("welcome-p").innerHTML = account_username + ", we are going to carry out a few steps, to improve your experience in VKM.";
        </script>
    </div>
    <div class="card">
        <h2>Step 1</h2>
        <p>Download a template (.csv file) to import your passwords to your personal vault.</p>
        <p>Later you can import them from "profile > import".</p>
        <button onclick="DownloadCSV()">Download</button>
        <script>
            function DownloadCSV() {
                const fileUrl = '../download/vkm_import_template.csv';
                fetch(fileUrl)
                    .then(response => response.blob())
                    .then(blob => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = '../download/vkm_import_template.csv';
                    link.dispatchEvent(new MouseEvent('click'));
                    });
            }
        </script>
    </div>
    <div class="card">
        <h2>Step 2</h2>
        <p id="step2-p"></p>
        <button onclick="DownloadToken()">Recovery</button>
        <script>            
            document.getElementById("step2-p").innerHTML = account_username + ", download the recovery file. If you lose your password, you can recover your account with this file!";
            function DownloadToken() {
                const fileUrl = '../temp/' + account_username + '.key';
                fetch(fileUrl)
                    .then(response => response.blob())
                    .then(blob => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = '../temp/' + account_username + '.key';
                    link.dispatchEvent(new MouseEvent('click'));
                    });
            }
        </script>
    </div>
    <button onclick="nextCard()" id="btm-nxt">Siguiente</button>
    <script src="../js/setup.js"></script>
</body>
</html>